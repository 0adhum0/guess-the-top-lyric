<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Guess the Song</title>
		<style>
			body {
				font-family: Arial, sans-serif;
				margin: 2em;
			}
			#lyric {
				font-size: 1.5em;
				margin-bottom: 1em;
			}
			#feedback {
				margin-top: 1em;
				font-weight: bold;
			}
		</style>
	</head>
	<body>
		<h1>ðŸŽµ Guess the Song ðŸŽµ</h1>
		<div id="lyric">Loading lyric...</div>
		<input type="text" id="guessInput" placeholder="Your guess here" />
		<button onclick="submitGuess()">Guess</button>
		<button onclick="getHint()">Hint</button>
		<button onclick="nextLyric()">Next</button>
		<div id="feedback"></div>
		<div id="points">Points: 0</div>

		<script>
			let currentLyric = "";
			let points = 0;

			async function fetchLyric() {
				const response = await fetch("/api/next");
				const data = await response.json();
				currentLyric = data.lyric;
				document.getElementById("lyric").innerText = currentLyric;
				document.getElementById("feedback").innerText = "";
				document.getElementById("guessInput").value = "";
			}

			async function submitGuess() {
				const guess = document.getElementById("guessInput").value;
				const response = await fetch("/api/guess", {
					method: "POST",
					headers: { "Content-Type": "application/json" },
					body: JSON.stringify({ guess }),
				});
				const data = await response.json();
				document.getElementById("feedback").innerText = data.message;
				if (data.correct) {
					points += 1;
					document.getElementById(
						"points"
					).innerText = `Points: ${points}`;
				}
			}

			async function getHint() {
				const response = await fetch("/api/hint");
				const data = await response.json();
				document.getElementById(
					"feedback"
				).innerText = `Hint: ${data.hint}`;
			}

			function nextLyric() {
				fetchLyric();
			}

			// Initialize the first lyric on page load
			fetchLyric();
		</script>
	</body>
</html>
